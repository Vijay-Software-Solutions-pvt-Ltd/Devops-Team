import{r as x,j as e,I as _,F as w,k as f,J as B,x as k,K as I,M as E,E as R}from"./index-DyprfCce.js";import{a as m}from"./api-Bbd7J0M8.js";function T(){const[i,c]=x.useState({title:"",description:"",duration:60,start_date:"",end_date:"",org_id:""}),[d,p]=x.useState([]),[y,b]=x.useState([]);x.useEffect(()=>{m.get("/admin/orgs").then(r=>{r.data&&r.data.orgs&&b(r.data.orgs)}).catch(r=>console.error("Failed to fetch orgs",r))},[]);function g(r){p(n=>[...n,{type:r,difficulty:r==="coding"?"hard":"normal",content:{prompt:""},choices:r==="mcq"?["","","",""]:null,correct_answer:r==="mcq"?{correct:0}:null,points:r==="coding"?10:2}])}function j(r){p(n=>n.filter((o,s)=>s!==r))}function u(r,n,o){const s=[...d];n==="prompt"?s[r].content.prompt=o:s[r][n]=o,p(s)}function v(r,n,o){const s=[...d];s[r].choices[n]=o,p(s)}function C(r){const n=r.target.files[0];if(!n)return;const o=new FileReader;o.onload=s=>{try{const l=JSON.parse(s.target.result);if(Array.isArray(l)){const h=l.map(a=>({type:a.type||"mcq",difficulty:a.difficulty||"normal",content:a.content||{prompt:""},choices:a.choices||(a.type==="mcq"?["","","",""]:null),correct_answer:a.correct_answer||(a.type==="mcq"?{correct:0}:null),points:a.points||2}));p(a=>[...a,...h]),alert(`Successfully imported ${h.length} questions!`)}else alert("Invalid JSON format. Expected an array of questions.")}catch(l){alert("Failed to parse JSON file."),console.error(l)}},o.readAsText(n)}async function S(){if(!i.title||!i.org_id)return alert("Title and Org ID are required");const r=n=>n?new Date(n).toISOString():null;try{await m.post("/admin/exams/create",{...i,start_date:r(i.start_date),end_date:r(i.end_date),duration_minutes:i.duration,questions:d}),alert("Exam created successfully!"),c({title:"",description:"",duration:60,start_date:"",end_date:"",org_id:""}),p([])}catch(n){console.error(n),alert("Failed to create exam")}}return e.jsxs("div",{style:t.container,children:[e.jsx("h1",{style:t.title,children:"Create New Exam"}),e.jsxs("div",{style:t.grid,children:[e.jsxs("div",{style:t.card,children:[e.jsxs("h3",{style:t.cardTitle,children:[" ",e.jsx(_,{style:{marginRight:8}})," Exam Details"]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Exam Title"}),e.jsx("input",{style:t.input,placeholder:"e.g. Final Assessment 2024",value:i.title,onChange:r=>c({...i,title:r.target.value})})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Description"}),e.jsx("textarea",{style:{...t.input,height:"80px",resize:"vertical"},placeholder:"Brief description...",value:i.description,onChange:r=>c({...i,description:r.target.value})})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Organization"}),e.jsxs("select",{style:t.select,value:i.org_id,onChange:r=>c({...i,org_id:r.target.value}),children:[e.jsx("option",{value:"",children:"Select Organization"}),y.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsx("div",{style:t.row,children:e.jsxs("div",{style:t.col,children:[e.jsxs("label",{style:t.label,children:[e.jsx(w,{})," Duration (min)"]}),e.jsx("input",{type:"number",style:t.input,value:i.duration,onChange:r=>c({...i,duration:r.target.value})})]})}),e.jsxs("div",{style:t.formGroup,children:[e.jsxs("label",{style:t.label,children:[e.jsx(f,{})," Start Date"]}),e.jsx("input",{type:"datetime-local",style:t.input,value:i.start_date,onChange:r=>c({...i,start_date:r.target.value})})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsxs("label",{style:t.label,children:[e.jsx(f,{})," End Date"]}),e.jsx("input",{type:"datetime-local",style:t.input,value:i.end_date,onChange:r=>c({...i,end_date:r.target.value})})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:t.questionsHeader,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("h3",{style:{...t.cardTitle,marginBottom:0},children:["Questions (",d.length,")"]}),e.jsx("input",{type:"file",id:"import-json",style:{display:"none"},accept:".json",onChange:C}),e.jsxs("button",{style:t.importBtn,onClick:()=>document.getElementById("import-json").click(),title:"Import Questions from JSON",children:[e.jsx(B,{style:{marginRight:6}})," Import JSON"]})]}),e.jsxs("div",{style:t.btnGroup,children:[e.jsx("button",{style:t.addBtn,onClick:()=>g("mcq"),children:"+ MCQ"}),e.jsx("button",{style:t.addBtn,onClick:()=>g("coding"),children:"+ Coding"}),d.length>0&&e.jsxs("button",{style:t.publishBtn,onClick:S,children:[e.jsx(k,{style:{marginRight:6}})," Publish Exam"]})]})]}),d.length===0&&e.jsx("div",{style:t.emptyState,children:"No questions added yet. Click above to add one."}),d.map((r,n)=>e.jsxs("div",{style:t.questionCard,children:[e.jsxs("div",{style:t.qHeader,children:[e.jsxs("span",{style:t.qTypeBadge,children:[r.type==="mcq"?e.jsx(I,{}):e.jsx(E,{})," ",r.type.toUpperCase()]}),e.jsx("button",{style:t.deleteBtn,onClick:()=>j(n),children:e.jsx(R,{})})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Prompt / Question"}),e.jsx("textarea",{style:{...t.input,height:"60px"},value:r.content.prompt,onChange:o=>u(n,"prompt",o.target.value),placeholder:"Enter the question here..."})]}),e.jsxs("div",{style:t.row,children:[e.jsxs("div",{style:t.col,children:[e.jsx("label",{style:t.label,children:"Points"}),e.jsx("input",{type:"number",style:t.input,value:r.points,onChange:o=>u(n,"points",Number(o.target.value))})]}),e.jsxs("div",{style:t.col,children:[e.jsx("label",{style:t.label,children:"Difficulty"}),e.jsxs("select",{style:t.select,value:r.difficulty,onChange:o=>u(n,"difficulty",o.target.value),children:[e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"hard",children:"Hard"})]})]})]}),r.type==="mcq"&&e.jsxs("div",{style:{marginTop:12},children:[e.jsx("label",{style:t.label,children:"Choices (Select correct index via radio)"}),r.choices.map((o,s)=>e.jsxs("div",{style:t.choiceRow,children:[e.jsx("input",{type:"radio",name:`correct-${n}`,checked:r.correct_answer.correct===s,onChange:()=>{const l=[...d];l[n].correct_answer.correct=s,p(l)}}),e.jsx("input",{style:t.choiceInput,value:o,onChange:l=>v(n,s,l.target.value),placeholder:`Option ${s+1}`})]},s))]})]},n))]})]})]})}const t={container:{padding:"32px",maxWidth:"1200px",margin:"0 auto",fontFamily:"'Inter', sans-serif"},title:{fontSize:"28px",fontWeight:"700",color:"#1e293b",marginBottom:"32px"},grid:{display:"grid",gridTemplateColumns:"350px 1fr",gap:"32px",alignItems:"start"},card:{background:"#fff",borderRadius:"12px",padding:"24px",boxShadow:"0 4px 6px rgba(0,0,0,0.02)",border:"1px solid #e2e8f0"},cardTitle:{fontSize:"18px",fontWeight:"600",marginBottom:"20px",color:"#334155",display:"flex",alignItems:"center"},formGroup:{marginBottom:"16px"},label:{display:"block",fontSize:"13px",fontWeight:"500",color:"#64748b",marginBottom:"6px"},input:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"1px solid #cbd5e1",fontSize:"14px",outline:"none",transition:"border-color 0.2s",boxSizing:"border-box"},select:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"1px solid #cbd5e1",fontSize:"14px",background:"#fff",outline:"none",boxSizing:"border-box"},row:{display:"flex",gap:"12px"},col:{flex:1},questionsHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},btnGroup:{display:"flex",gap:"8px"},addBtn:{background:"#fff",border:"1px solid #cbd5e1",padding:"8px 16px",borderRadius:"8px",fontSize:"13px",fontWeight:"600",color:"#475569",cursor:"pointer",transition:"all 0.2s"},questionCard:{background:"#fff",borderRadius:"12px",padding:"20px",marginBottom:"16px",border:"1px solid #e2e8f0",boxShadow:"0 2px 4px rgba(0,0,0,0.02)"},qHeader:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},qTypeBadge:{background:"#f1f5f9",padding:"4px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",color:"#475569",display:"flex",alignItems:"center",gap:"6px"},deleteBtn:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",padding:"4px"},choiceRow:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},choiceInput:{flex:1,padding:"8px 12px",borderRadius:"6px",border:"1px solid #e2e8f0",fontSize:"14px"},publishBtn:{width:"100%",padding:"14px",background:"#2563eb",color:"#fff",border:"none",borderRadius:"10px",fontWeight:"600",fontSize:"16px",cursor:"pointer",marginTop:"16px",boxShadow:"0 4px 12px rgba(37,99,235,0.2)"},emptyState:{background:"#f8fafc",padding:"32px",borderRadius:"12px",border:"2px dashed #cbd5e1",textAlign:"center",color:"#94a3b8"},importBtn:{background:"#f1f5f9",border:"1px solid #cbd5e1",color:"#475569",padding:"6px 12px",borderRadius:"8px",fontSize:"13px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",transition:"all 0.2s"}};export{T as default};
//# sourceMappingURL=AdminCreateExam-c13Te3eB.js.map
