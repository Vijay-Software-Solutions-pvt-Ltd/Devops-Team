{"version":3,"file":"AdminEditExam-deqGONaP.js","sources":["../../src/pages/admin/AdminEditExam.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport api from '../../services/api';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { FiSave, FiTrash2, FiClock, FiCalendar, FiLayers, FiType, FiCode, FiUpload } from 'react-icons/fi';\n\nexport default function AdminEditExam() {\n    const { id } = useParams();\n    const navigate = useNavigate();\n    const [loading, setLoading] = useState(true);\n\n    const [exam, setExam] = useState({\n        title: '',\n        description: '',\n        duration: 60,\n        start_date: '',\n        end_date: '',\n        org_id: ''\n    });\n\n    const [questions, setQuestions] = useState([]);\n    const [orgs, setOrgs] = useState([]);\n\n    useEffect(() => {\n        loadExamData();\n    }, [id, navigate]);\n\n    async function loadExamData() {\n        setLoading(true);\n        try {\n            // Fetch Orgs & Exam Data\n            const [orgRes, examRes] = await Promise.all([\n                api.get('/admin/orgs'),\n                api.get(`/admin/exams/${id}`)\n            ]);\n\n            if (orgRes.data?.orgs) setOrgs(orgRes.data.orgs);\n\n            const eData = examRes.data.exam;\n            const qData = examRes.data.questions;\n\n            // Format UTC date to Local datetime-local string (YYYY-MM-DDTHH:mm)\n            const formatDT = (isoStr) => {\n                if (!isoStr) return '';\n                const d = new Date(isoStr);\n                // Get local ISO string by shifting time with timezone offset\n                const local = new Date(d.getTime() - (d.getTimezoneOffset() * 60000));\n                return local.toISOString().slice(0, 16);\n            };\n\n            setExam({\n                title: eData.title,\n                description: eData.description || '',\n                duration: eData.duration_minutes,\n                start_date: formatDT(eData.start_date),\n                end_date: formatDT(eData.end_date),\n                org_id: ''\n            });\n\n            // Parse question content if it's JSON string (it comes as object from pg usually if jsonb, but let's be safe)\n            setQuestions(qData.map(q => ({\n                ...q,\n                content: typeof q.content === 'string' ? JSON.parse(q.content) : q.content,\n                choices: typeof q.choices === 'string' ? JSON.parse(q.choices) : (q.choices || []),\n                correct_answer: typeof q.correct_answer === 'string' ? JSON.parse(q.correct_answer) : (q.correct_answer || { correct: 0 })\n            })));\n            setLoading(false);\n        } catch (err) {\n            console.error(err);\n            alert(\"Failed to load exam data\");\n            navigate('/admin/exams');\n        }\n    }\n\n    function addQuestion(type) {\n        setQuestions(prev => [\n            ...prev,\n            {\n                // No ID means new\n                type,\n                difficulty: type === 'coding' ? 'hard' : 'normal',\n                content: { prompt: '' },\n                choices: type === 'mcq' ? ['', '', '', ''] : null,\n                correct_answer: type === 'mcq' ? { correct: 0 } : null,\n                points: type === 'coding' ? 10 : 2\n            }\n        ]);\n    }\n\n    function removeQuestion(index) {\n        setQuestions(prev => prev.filter((_, i) => i !== index));\n    }\n\n    function updateQuestion(index, field, value) {\n        const arr = [...questions];\n        if (field === 'prompt') arr[index].content.prompt = value;\n        else arr[index][field] = value;\n        setQuestions(arr);\n    }\n\n    function updateChoice(qIndex, cIndex, value) {\n        const arr = [...questions];\n        arr[qIndex].choices[cIndex] = value;\n        setQuestions(arr);\n    }\n\n    // Bulk Upload Handler\n    function handleFileUpload(e) {\n        const file = e.target.files[0];\n        if (!file) return;\n\n        const reader = new FileReader();\n        reader.onload = (evt) => {\n            try {\n                const json = JSON.parse(evt.target.result);\n                if (Array.isArray(json)) {\n                    // Validate basic structure if needed\n                    const newQs = json.map(q => ({\n                        id: undefined, // ensure new IDs are generated\n                        type: q.type || 'mcq',\n                        difficulty: q.difficulty || 'normal',\n                        content: q.content || { prompt: 'Imported Question' },\n                        choices: q.choices || [],\n                        correct_answer: q.correct_answer || { correct: 0 },\n                        points: q.points || 1\n                    }));\n                    setQuestions(prev => [...prev, ...newQs]);\n                    alert(`Imported ${newQs.length} questions!`);\n                } else {\n                    alert(\"JSON file must be an array of questions.\");\n                }\n            } catch (err) {\n                alert(\"Invalid JSON file\");\n            }\n        };\n        reader.readAsText(file);\n    }\n\n    async function saveExam() {\n        if (!exam.title) return alert(\"Title required\");\n\n        // Convert Local datetime-local string back to UTC ISO string for server\n        const toUTC = (localStr) => {\n            if (!localStr) return null;\n            return new Date(localStr).toISOString();\n        };\n\n        try {\n            await api.put(`/admin/exams/${id}`, {\n                ...exam,\n                start_date: toUTC(exam.start_date),\n                end_date: toUTC(exam.end_date),\n                duration_minutes: exam.duration,\n                questions\n            });\n            alert('Exam updated successfully!');\n            // Reload exam data to show updated values\n            await loadExamData();\n        } catch (err) {\n            console.error(err);\n            alert('Failed to update exam');\n        }\n    }\n\n    if (loading) return <div style={{ padding: 40 }}>Loading...</div>;\n\n    return (\n        <div style={styles.container}>\n            <h1 style={styles.title}>Edit Exam: {exam.title}</h1>\n\n            <div style={styles.grid}>\n\n                {/* LEFT COLUMN: EXAM DETAILS */}\n                <div style={styles.card}>\n                    <h3 style={styles.cardTitle}> <FiLayers style={{ marginRight: 8 }} /> Exam Details</h3>\n\n                    <div style={styles.formGroup}>\n                        <label style={styles.label}>Exam Title</label>\n                        <input\n                            style={styles.input}\n                            value={exam.title}\n                            onChange={e => setExam({ ...exam, title: e.target.value })}\n                        />\n                    </div>\n\n                    <div style={styles.formGroup}>\n                        <label style={styles.label}>Description</label>\n                        <textarea\n                            style={{ ...styles.input, height: '80px', resize: 'vertical' }}\n                            value={exam.description}\n                            onChange={e => setExam({ ...exam, description: e.target.value })}\n                        />\n                    </div>\n\n                    {/* Org Selection is tricky on Edit if we don't know current org. \n              We can allow re-assigning, but ideally we should fetch current assignment.\n              For now, adding a note.\n           */}\n                    <div style={styles.formGroup}>\n                        <label style={styles.label}>Organization (Re-assign)</label>\n                        <select\n                            style={styles.select}\n                            value={exam.org_id}\n                            onChange={e => setExam({ ...exam, org_id: e.target.value })}\n                        >\n                            <option value=\"\">Keep current (or select to change)</option>\n                            {orgs.map(org => (\n                                <option key={org.id} value={org.id}>{org.name}</option>\n                            ))}\n                        </select>\n                    </div>\n\n                    <div style={styles.row}>\n                        <div style={styles.col}>\n                            <label style={styles.label}><FiClock /> Duration (min)</label>\n                            <input\n                                type=\"number\" style={styles.input}\n                                value={exam.duration}\n                                onChange={e => setExam({ ...exam, duration: e.target.value })}\n                            />\n                        </div>\n                    </div>\n\n                    <div style={styles.formGroup}>\n                        <label style={styles.label}><FiCalendar /> Start Date</label>\n                        <input\n                            type=\"datetime-local\" style={styles.input}\n                            value={exam.start_date}\n                            onChange={e => setExam({ ...exam, start_date: e.target.value })}\n                        />\n                    </div>\n\n                    <div style={styles.formGroup}>\n                        <label style={styles.label}><FiCalendar /> End Date</label>\n                        <input\n                            type=\"datetime-local\" style={styles.input}\n                            value={exam.end_date}\n                            onChange={e => setExam({ ...exam, end_date: e.target.value })}\n                        />\n                    </div>\n                </div>\n\n                {/* RIGHT COLUMN: QUESTIONS */}\n                <div>\n                    <div style={styles.questionsHeader}>\n                        <h3 style={{ ...styles.cardTitle, marginBottom: 0 }}>Questions ({questions.length})</h3>\n                        <div style={styles.btnGroup}>\n                            <label style={styles.uploadBtn}>\n                                <FiUpload style={{ marginRight: 6 }} /> Import JSON\n                                <input type=\"file\" accept=\".json\" onChange={handleFileUpload} style={{ display: 'none' }} />\n                            </label>\n                            <button style={styles.addBtn} onClick={() => addQuestion('mcq')}>+ MCQ</button>\n                            <button style={styles.addBtn} onClick={() => addQuestion('coding')}>+ Coding</button>\n                            <button style={styles.publishBtn} onClick={saveExam}>\n                                <FiSave style={{ marginRight: 8 }} /> Save Changes\n                            </button>\n                        </div>\n                    </div>\n\n                    {questions.map((q, i) => (\n                        <div key={i} style={styles.questionCard}>\n                            <div style={styles.qHeader}>\n                                <span style={styles.qTypeBadge}>\n                                    {q.type === 'mcq' ? <FiType /> : <FiCode />} {q.type.toUpperCase()}\n                                </span>\n                                <button style={styles.deleteBtn} onClick={() => removeQuestion(i)}>\n                                    <FiTrash2 />\n                                </button>\n                            </div>\n\n                            <div style={styles.formGroup}>\n                                <label style={styles.label}>Prompt / Question</label>\n                                <textarea\n                                    style={{ ...styles.input, height: '60px' }}\n                                    value={q.content.prompt}\n                                    onChange={e => updateQuestion(i, 'prompt', e.target.value)}\n                                />\n                            </div>\n\n                            {/* ... Same choices logic as create ... */}\n                            {q.type === 'mcq' && (\n                                <div style={{ marginTop: 12 }}>\n                                    <label style={styles.label}>Choices</label>\n                                    {q.choices.map((c, idx) => (\n                                        <div key={idx} style={styles.choiceRow}>\n                                            <input\n                                                type=\"radio\"\n                                                name={`correct-${i}`}\n                                                checked={q.correct_answer.correct === idx}\n                                                onChange={() => {\n                                                    const arr = [...questions];\n                                                    arr[i].correct_answer.correct = idx;\n                                                    setQuestions(arr);\n                                                }}\n                                            />\n                                            <input\n                                                style={styles.choiceInput}\n                                                value={c}\n                                                onChange={e => updateChoice(i, idx, e.target.value)}\n                                            />\n                                        </div>\n                                    ))}\n                                </div>\n                            )}\n                        </div>\n                    ))}\n\n                </div>\n            </div>\n        </div>\n    );\n}\n\nconst styles = {\n    container: {\n        padding: '32px',\n        maxWidth: '1200px',\n        margin: '0 auto',\n        fontFamily: \"'Inter', sans-serif\"\n    },\n    title: {\n        fontSize: '28px',\n        fontWeight: '700',\n        color: '#1e293b',\n        marginBottom: '32px'\n    },\n    grid: {\n        display: 'grid',\n        gridTemplateColumns: '350px 1fr',\n        gap: '32px',\n        alignItems: 'start'\n    },\n    card: {\n        background: '#fff',\n        borderRadius: '12px',\n        padding: '24px',\n        boxShadow: '0 4px 6px rgba(0,0,0,0.02)',\n        border: '1px solid #e2e8f0'\n    },\n    cardTitle: {\n        fontSize: '18px',\n        fontWeight: '600',\n        marginBottom: '20px',\n        color: '#334155',\n        display: 'flex',\n        alignItems: 'center'\n    },\n    formGroup: {\n        marginBottom: '16px'\n    },\n    label: {\n        display: 'block',\n        fontSize: '13px',\n        fontWeight: '500',\n        color: '#64748b',\n        marginBottom: '6px'\n    },\n    input: {\n        width: '100%',\n        padding: '10px 12px',\n        borderRadius: '8px',\n        border: '1px solid #cbd5e1',\n        fontSize: '14px',\n        outline: 'none',\n        boxSizing: 'border-box'\n    },\n    select: {\n        width: '100%',\n        padding: '10px 12px',\n        borderRadius: '8px',\n        border: '1px solid #cbd5e1',\n        background: '#fff'\n    },\n    row: {\n        display: 'flex',\n        gap: '12px'\n    },\n    col: {\n        flex: 1\n    },\n    questionsHeader: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: '16px'\n    },\n    btnGroup: {\n        display: 'flex',\n        gap: '8px'\n    },\n    addBtn: {\n        background: '#fff',\n        border: '1px solid #cbd5e1',\n        padding: '8px 16px',\n        borderRadius: '8px',\n        fontSize: '13px',\n        fontWeight: '600',\n        color: '#475569',\n        cursor: 'pointer'\n    },\n    uploadBtn: {\n        background: '#f0fdf4',\n        border: '1px solid #bbf7d0',\n        padding: '8px 16px',\n        borderRadius: '8px',\n        fontSize: '13px',\n        fontWeight: '600',\n        color: '#166534',\n        cursor: 'pointer',\n        display: 'flex',\n        alignItems: 'center'\n    },\n    questionCard: {\n        background: '#fff',\n        borderRadius: '12px',\n        padding: '20px',\n        marginBottom: '16px',\n        border: '1px solid #e2e8f0',\n        boxShadow: '0 2px 4px rgba(0,0,0,0.02)'\n    },\n    qHeader: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        marginBottom: '16px'\n    },\n    qTypeBadge: {\n        background: '#f1f5f9',\n        padding: '4px 10px',\n        borderRadius: '6px',\n        fontSize: '12px',\n        fontWeight: '600',\n        color: '#475569'\n    },\n    deleteBtn: {\n        background: 'transparent',\n        border: 'none',\n        color: '#ef4444',\n        cursor: 'pointer'\n    },\n    choiceRow: {\n        display: 'flex',\n        alignItems: 'center',\n        gap: '8px',\n        marginBottom: '8px'\n    },\n    choiceInput: {\n        flex: 1,\n        padding: '8px 12px',\n        borderRadius: '6px',\n        border: '1px solid #e2e8f0',\n        fontSize: '14px'\n    },\n    publishBtn: {\n        width: '100%',\n        padding: '14px',\n        background: '#2563eb',\n        color: '#fff',\n        border: 'none',\n        borderRadius: '10px',\n        fontWeight: '600',\n        fontSize: '16px',\n        cursor: 'pointer',\n        marginTop: '16px',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        boxShadow: '0 4px 12px rgba(37,99,235,0.2)'\n    }\n};\n"],"names":["AdminEditExam","id","useParams","navigate","useNavigate","loading","setLoading","useState","exam","setExam","questions","setQuestions","orgs","setOrgs","useEffect","loadExamData","orgRes","examRes","api","_a","eData","qData","formatDT","isoStr","d","q","err","addQuestion","type","prev","removeQuestion","index","_","i","updateQuestion","field","value","arr","updateChoice","qIndex","cIndex","handleFileUpload","e","file","reader","evt","json","newQs","saveExam","toUTC","localStr","jsx","jsxs","styles","FiLayers","org","FiClock","FiCalendar","FiUpload","FiSave","FiType","FiCode","FiTrash2","c","idx"],"mappings":"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"}