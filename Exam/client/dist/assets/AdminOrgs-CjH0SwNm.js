import{r as i,j as e,G as T,x as D,B as U,y as $,H as G,I as q,E as J}from"./index-DyprfCce.js";import{a as u}from"./api-Bbd7J0M8.js";function V(){const[g,H]=i.useState([]),[d,f]=i.useState(""),[c,x]=i.useState(""),[b,j]=i.useState("flexi"),[v,r]=i.useState(250),[S,o]=i.useState(12),[C,z]=i.useState(""),[w,A]=i.useState(""),[k,B]=i.useState(""),[F,N]=i.useState(""),[E,O]=i.useState(""),[I,P]=i.useState(!1),[R,p]=i.useState(!1),[a,L]=i.useState(null);i.useEffect(()=>{m()},[]);async function m(){try{const s=await u.get("/admin/orgs/");H(s.data.orgs||[])}catch(s){console.error(s)}}async function M(){var s,n;if(!d||!c)return alert("Enter all fields");P(!0);try{a?(await u.put(`/admin/orgs/${a.id}`,{name:d,address:c}),alert("✅ Organization updated successfully!")):(await u.post("/admin/orgs/",{name:d,address:c,plan:b,users_limit:v,exams_limit:S,adminFirstName:C,adminLastName:w,adminEmail:k,adminPassword:F,adminPhone:E}),alert("✅ Organization and Admin created successfully!")),y(),m()}catch(l){alert(((n=(s=l==null?void 0:l.response)==null?void 0:s.data)==null?void 0:n.error)||"Failed to save org"),console.error(l)}P(!1)}async function X(s){var n,l;if(confirm("Are you sure you want to delete this organization?"))try{await u.delete(`/admin/orgs/${s}`),m()}catch(W){alert("Failed to delete: "+(((l=(n=W.response)==null?void 0:n.data)==null?void 0:l.error)||W.message))}}function _(s){L(s),f(s.name),x(s.address),x(s.address),p(!0),window.scrollTo({top:0,behavior:"smooth"})}function y(){L(null),f(""),x(""),j("flexi"),r(250),o(12),z(""),A(""),B(""),N(""),O("")}return e.jsxs("div",{style:t.container,children:[e.jsxs("div",{style:h.header,children:[e.jsxs("div",{children:[e.jsxs("h1",{style:h.title,children:[e.jsx(T,{style:{marginRight:10}})," Organization Management"]}),e.jsx("p",{style:h.subtitle,children:"Manage departments and organizational units"})]}),e.jsxs("button",{style:h.primaryButton,onClick:()=>{y(),p(!R)},children:[e.jsx(D,{style:{marginRight:8}}),"Add Organization"]})]}),e.jsxs("div",{style:t.content,children:[R&&e.jsxs("div",{style:t.formCard,children:[e.jsxs("div",{style:t.cardHeader,children:[e.jsx("span",{style:t.iconCircle,children:a?e.jsx(U,{}):e.jsx(D,{})}),e.jsx("h3",{style:t.cardTitle,children:a?"Edit Organization":"Create New Organization"}),e.jsx("button",{onClick:()=>{p(!1),y()},style:t.closeBtn,title:"Close",children:e.jsx($,{})})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Organization Name"}),e.jsxs("div",{style:t.inputWrapper,children:[e.jsx("span",{style:t.inputIcon,children:e.jsx(T,{})}),e.jsx("input",{style:t.input,placeholder:"e.g. Engineering Dept",value:d,onChange:s=>f(s.target.value)})]})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Location / Address"}),e.jsxs("div",{style:t.inputWrapper,children:[e.jsx("span",{style:t.inputIcon,children:e.jsx(G,{})}),e.jsx("input",{style:t.input,placeholder:"e.g. Building A, Floor 3",value:c,onChange:s=>x(s.target.value)})]})]}),!a&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{style:{margin:"20px 0 10px 0",fontSize:"16px",color:"#1e293b"},children:"Subscription Setup"}),e.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:t.label,children:"Plan"}),e.jsxs("select",{style:t.input,value:b,onChange:s=>{const n=s.target.value;j(n),n==="institutional"?(r(1e3),o(48)):n==="flexi"?(r(250),o(12)):(r(500),o(24))},children:[e.jsx("option",{value:"flexi",children:"Flexi Plan"}),e.jsx("option",{value:"institutional",children:"Institutional Plan"}),e.jsx("option",{value:"custom",children:"Custom Plan"})]})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:t.label,children:"Users Limit"}),e.jsx("input",{style:t.input,type:"number",value:v,onChange:s=>r(Number(s.target.value))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:t.label,children:"Exams Limit"}),e.jsx("input",{style:t.input,type:"number",value:S,onChange:s=>o(Number(s.target.value))})]})]}),e.jsx("h4",{style:{margin:"20px 0 10px 0",fontSize:"16px",color:"#1e293b"},children:"Primary Admin Credentials"}),e.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:t.label,children:"First Name"}),e.jsx("input",{style:t.input,placeholder:"First Name",value:C,onChange:s=>z(s.target.value)})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:t.label,children:"Last Name"}),e.jsx("input",{style:t.input,placeholder:"Last Name",value:w,onChange:s=>A(s.target.value)})]})]}),e.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:t.label,children:"Admin Email"}),e.jsx("input",{style:t.input,type:"email",placeholder:"admin@org.com",value:k,onChange:s=>B(s.target.value)})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:t.label,children:"Admin Password"}),e.jsx("input",{style:t.input,type:"password",placeholder:"Min 6 characters",value:F,onChange:s=>N(s.target.value)})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:t.label,children:"Phone Number"}),e.jsx("input",{style:t.input,placeholder:"Phone",value:E,onChange:s=>O(s.target.value)})]})]})]}),e.jsxs("div",{style:t.formActions,children:[e.jsx("button",{style:t.cancelButton,onClick:()=>p(!1),children:"Cancel"}),e.jsx("button",{style:t.button,onClick:M,disabled:I,children:I?"Saving...":a?"Update Organization":"Create Organization"})]})]}),e.jsxs("div",{style:t.card,children:[e.jsxs("div",{style:t.cardHeader,children:[e.jsx("span",{style:{...t.iconCircle,background:"#e0f2fe",color:"#0284c7"},children:e.jsx(q,{})}),e.jsxs("h3",{style:t.cardTitle,children:["Existing Organizations (",g.length,")"]})]}),e.jsx("div",{style:t.tableWrapper,children:e.jsxs("table",{style:t.table,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:t.th,children:"Name"}),e.jsx("th",{style:t.th,children:"Address"}),e.jsx("th",{style:t.th,children:"Org ID (UUID)"}),e.jsx("th",{style:t.th,children:"Actions"})]})}),e.jsx("tbody",{children:g.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"3",style:t.emptyState,children:"No organizations found."})}):g.map((s,n)=>e.jsxs("tr",{style:n%2!==0?t.trAlt:{},children:[e.jsx("td",{style:t.td,children:e.jsx("div",{style:t.orgName,children:s.name})}),e.jsx("td",{style:t.td,children:e.jsxs("div",{style:t.orgAddr,children:[e.jsx(G,{size:12,style:{marginRight:4}})," ",s.address]})}),e.jsx("td",{style:t.td,children:e.jsx("code",{style:t.code,children:s.id})}),e.jsx("td",{style:t.td,children:e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>_(s),style:t.iconBtn,title:"Edit",children:e.jsx(U,{})}),e.jsx("button",{onClick:()=>X(s.id),style:{...t.iconBtn,color:"#ef4444",borderColor:"#fecaca",background:"#fef2f2"},title:"Delete",children:e.jsx(J,{})})]})})]},s.id))})]})})]})]})]})}const h={header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px",background:"#fff",padding:"24px 32px",borderRadius:"16px",boxShadow:"0 4px 20px rgba(0,0,0,0.05)",border:"1px solid #e2e8f0"},title:{fontSize:"24px",fontWeight:"700",color:"#0f172a",display:"flex",alignItems:"center",margin:0},subtitle:{fontSize:"14px",color:"#64748b",marginTop:"4px",margin:0},primaryButton:{background:"#2563eb",color:"#fff",border:"none",padding:"12px 24px",borderRadius:"10px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",boxShadow:"0 4px 12px rgba(37,99,235,0.2)",transition:"all 0.2s",fontSize:"14px"}},t={container:{padding:"32px",maxWidth:"1400px",margin:"0 auto",fontFamily:"'Inter', sans-serif"},content:{display:"flex",flexDirection:"column",gap:"32px"},formCard:{background:"#fff",borderRadius:"16px",boxShadow:"0 4px 20px rgba(0,0,0,0.05)",border:"1px solid #e2e8f0",padding:"32px",animation:"slideDown 0.3s ease-out"},card:{background:"#fff",borderRadius:"16px",boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #e2e8f0",padding:"0",overflow:"hidden"},cardHeader:{display:"flex",alignItems:"center",marginBottom:"20px",gap:"12px",padding:"20px 24px 0"},iconCircle:{width:"36px",height:"36px",borderRadius:"50%",background:"#eff6ff",color:"#2563eb",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px"},cardTitle:{fontSize:"18px",fontWeight:"600",color:"#334155",margin:0},formGroup:{marginBottom:"16px"},label:{display:"block",fontSize:"13px",fontWeight:"500",color:"#64748b",marginBottom:"8px"},inputWrapper:{display:"flex",alignItems:"center",position:"relative"},inputIcon:{position:"absolute",left:"12px",color:"#94a3b8"},input:{width:"100%",padding:"10px 10px 10px 36px",borderRadius:"8px",border:"1px solid #cbd5e1",fontSize:"14px",outline:"none",transition:"border-color 0.2s",boxSizing:"border-box"},button:{background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",padding:"12px 24px",fontWeight:"600",cursor:"pointer",boxShadow:"0 4px 12px rgba(37, 99, 235, 0.2)",fontSize:"14px"},cancelButton:{background:"transparent",color:"#64748b",border:"1px solid #cbd5e1",borderRadius:"8px",padding:"12px 24px",fontWeight:"600",cursor:"pointer",marginRight:"12px"},formActions:{display:"flex",justifyContent:"flex-end",marginTop:"16px"},tableWrapper:{overflowX:"auto"},table:{width:"100%",borderCollapse:"collapse",fontSize:"14px"},th:{textAlign:"left",padding:"14px",background:"#f8fafc",color:"#64748b",fontWeight:"600",borderBottom:"1px solid #e2e8f0"},td:{padding:"14px",borderBottom:"1px solid #e2e8f0",color:"#334155",verticalAlign:"middle"},trAlt:{background:"#f8fafc"},orgName:{fontWeight:"600",color:"#0f172a"},orgAddr:{fontSize:"13px",color:"#64748b",display:"flex",alignItems:"center"},code:{background:"#f1f5f9",padding:"4px 8px",borderRadius:"6px",fontFamily:"monospace",fontSize:"11px",color:"#475569",border:"1px solid #e2e8f0"},emptyState:{textAlign:"center",padding:"24px",color:"#94a3b8"},iconBtn:{padding:"6px",borderRadius:"6px",border:"1px solid #cbd5e1",background:"white",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"#64748b"},closeBtn:{marginLeft:"auto",background:"transparent",border:"none",cursor:"pointer",fontSize:"18px",color:"#94a3b8"}};export{V as default};
//# sourceMappingURL=AdminOrgs-CjH0SwNm.js.map
