{"version":3,"file":"AdminUsers-Cwh2emaa.js","sources":["../../src/pages/admin/AdminUsers.jsx"],"sourcesContent":["// client/src/pages/AdminUsers.jsx\nimport React, { useEffect, useState } from 'react';\nimport api from '../../services/api';\nimport { FiPlus, FiSearch, FiTrash2, FiCheckCircle, FiXCircle, FiUser, FiUsers, FiEdit, FiX, FiMoreVertical } from \"react-icons/fi\";\n\nexport default function AdminUsers() {\n  const [users, setUsers] = useState([]);\n  const [filteredUsers, setFilteredUsers] = useState([]);\n  const [search, setSearch] = useState('');\n  const [showAddForm, setShowAddForm] = useState(false);\n\n  // New User Form State\n  const [newUser, setNewUser] = useState({\n    name: '',\n    email: '',\n    org_id: '',\n    role: 'student', // default\n    password: '' // optional, auto-generated if empty in backend, but good to have\n  });\n  const [editingUser, setEditingUser] = useState(null);\n  const [openDropdownId, setOpenDropdownId] = useState(null); // Track which user's dropdown is open\n\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  useEffect(() => {\n    if (!search) {\n      setFilteredUsers(users);\n    } else {\n      const lower = search.toLowerCase();\n      setFilteredUsers(users.filter(u =>\n        (u.name && u.name.toLowerCase().includes(lower)) ||\n        (u.email && u.email.toLowerCase().includes(lower)) ||\n        (u.org_id && u.org_id.toLowerCase().includes(lower))\n      ));\n    }\n  }, [search, users]);\n\n  async function fetchUsers() {\n    try {\n      const r = await api.get('/admin/users');\n      setUsers(r.data.users || []);\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  async function handleSubmit() {\n    if (!newUser.email) return alert(\"Email is required\");\n    try {\n      if (editingUser) {\n        // Update\n        const response = await api.put(`/admin/users/${editingUser.id}`, {\n          name: newUser.name,\n          email: newUser.email,\n          role: newUser.role,\n          org_id: newUser.org_id\n        });\n        // Update with actual data from backend\n        if (response.data.user) {\n          setUsers(prev => prev.map(u => u.id === editingUser.id ? response.data.user : u));\n        }\n        alert('User updated successfully');\n      } else {\n        // Create\n        const payload = {\n          users: [{\n            name: newUser.name,\n            email: newUser.email,\n            role: newUser.role\n          }],\n          org_id: newUser.org_id\n        };\n        await api.post('/admin/users/bulk-create', payload);\n        alert('User created successfully');\n        fetchUsers();\n      }\n      resetForm();\n    } catch (err) {\n      alert('Failed to save user');\n      console.error(err);\n    }\n  }\n\n  function handleEdit(user) {\n    setEditingUser(user);\n    setNewUser({\n      name: user.name || '',\n      email: user.email || '',\n      org_id: user.org_id || '',\n      role: user.role || 'student',\n      password: ''\n    });\n    setShowAddForm(true);\n  }\n\n  function resetForm() {\n    setShowAddForm(false);\n    setEditingUser(null);\n    setNewUser({ name: '', email: '', org_id: '', role: 'student', password: '' });\n  }\n\n  async function toggleActive(userId, currentStatus) {\n    try {\n      const response = await api.post(`/admin/users/${userId}/activate`, { active: !currentStatus });\n      // Update with actual data from backend\n      if (response.data.user) {\n        setUsers(prev => prev.map(u => u.id === userId ? response.data.user : u));\n      } else {\n        // Fallback to optimistic update if backend doesn't return user\n        setUsers(prev => prev.map(u => u.id === userId ? { ...u, is_active: !currentStatus } : u));\n      }\n    } catch (err) {\n      alert(\"Failed to update status\");\n      console.error(err);\n    }\n  }\n\n  async function hardDelete(userId) {\n    if (!confirm(\"Are you sure you want to PERMANENTLY delete this user? This cannot be undone.\")) return;\n    try {\n      await api.delete(`/admin/users/${userId}/hard-delete`);\n      setUsers(prev => prev.filter(u => u.id !== userId));\n    } catch (err) {\n      alert(\"Failed to delete user: \" + (err.response?.data?.error || err.message));\n    }\n  }\n\n  return (\n    <div style={styles.container}>\n\n      {/* Header */}\n      <div style={commonStyles.header}>\n        <div>\n          <h1 style={commonStyles.title}><FiUsers style={{ marginRight: 10 }} /> User Management</h1>\n          <p style={commonStyles.subtitle}>View, manage, and create platform users</p>\n        </div>\n        <button style={commonStyles.primaryButton} onClick={() => { resetForm(); setShowAddForm(!showAddForm); }}>\n          <FiPlus style={{ marginRight: 8 }} />\n          Add User\n        </button>\n      </div>\n\n      {/* Add User Form (Collapsible) */}\n      {showAddForm && (\n        <div style={styles.formCard}>\n          <div style={styles.cardHeader}>\n            <h3 style={styles.formTitle}>{editingUser ? \"Edit User\" : \"Add New User\"}</h3>\n            <button onClick={resetForm} style={styles.closeBtn}><FiX /></button>\n          </div>\n          <div style={styles.formGrid}>\n            <div style={styles.inputGroup}>\n              <label style={styles.label}>Name</label>\n              <input\n                style={styles.input}\n                placeholder=\"John Doe\"\n                value={newUser.name}\n                onChange={e => setNewUser({ ...newUser, name: e.target.value })}\n              />\n            </div>\n            <div style={styles.inputGroup}>\n              <label style={styles.label}>Email *</label>\n              <input\n                style={styles.input}\n                placeholder=\"john@example.com\"\n                value={newUser.email}\n                onChange={e => setNewUser({ ...newUser, email: e.target.value })}\n              />\n            </div>\n            <div style={styles.inputGroup}>\n              <label style={styles.label}>Organization ID</label>\n              <input\n                style={styles.input}\n                placeholder=\"Optional Org ID\"\n                value={newUser.org_id}\n                onChange={e => setNewUser({ ...newUser, org_id: e.target.value })}\n              />\n            </div>\n            <div style={styles.inputGroup}>\n              <label style={styles.label}>Role</label>\n              <select\n                style={styles.select}\n                value={newUser.role}\n                onChange={e => setNewUser({ ...newUser, role: e.target.value })}\n              >\n                <option value=\"student\">Student</option>\n                <option value=\"admin\">Admin</option>\n              </select>\n            </div>\n          </div>\n          <div style={styles.formActions}>\n            <button style={styles.cancelButton} onClick={resetForm}>Cancel</button>\n            <button style={styles.submitButton} onClick={handleSubmit}>{editingUser ? \"Update User\" : \"Create User\"}</button>\n          </div>\n        </div>\n      )}\n\n      {/* Toolbar */}\n      <div style={styles.toolbar}>\n        <div style={styles.searchBox}>\n          <FiSearch style={{ color: '#94a3b8', marginRight: 10 }} />\n          <input\n            style={styles.searchInput}\n            placeholder=\"Search by name, email, or org...\"\n            value={search}\n            onChange={e => setSearch(e.target.value)}\n          />\n        </div>\n        <div style={styles.stats}>\n          Total Users: <strong>{users.length}</strong>\n        </div>\n      </div>\n\n      {/* Table */}\n      <div style={styles.tableCard}>\n        <table style={styles.table}>\n          <thead>\n            <tr>\n              <th style={styles.th}>User</th>\n              <th style={styles.th}>Role</th>\n              <th style={styles.th}>Organization</th>\n              <th style={styles.th}>Status</th>\n              <th style={styles.th}>Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {filteredUsers.map((u, i) => (\n              <tr key={u.id} style={i % 2 !== 0 ? styles.trAlt : {}}>\n                <td style={styles.td}>\n                  <div style={{ display: 'flex', alignItems: 'center' }}>\n                    <div style={styles.avatar}>\n                      <FiUser />\n                    </div>\n                    <div>\n                      <div style={styles.userName}>{u.name || 'No Name'}</div>\n                      <div style={styles.userEmail}>{u.email}</div>\n                    </div>\n                  </div>\n                </td>\n                <td style={styles.td}>\n                  <span style={u.role === 'admin' ? styles.adminBadge : styles.studentBadge}>\n                    {u.role}\n                  </span>\n                </td>\n                <td style={styles.td}>\n                  {u.org_id ? (\n                    <div>\n                      <div style={styles.orgName}>{u.org_name || 'Unknown Org'}</div>\n                      <code style={styles.code}>{u.org_id}</code>\n                    </div>\n                  ) : <span style={{ color: '#cbd5e1' }}>-</span>}\n                </td>\n                <td style={styles.td}>\n                  <span style={u.is_active ? styles.statusActive : styles.statusInactive}>\n                    {u.is_active ? 'Active' : 'Inactive'}\n                  </span>\n                </td>\n                <td style={styles.td}>\n                  <div style={{ position: 'relative' }}>\n                    <button\n                      style={styles.actionBtn}\n                      onClick={() => setOpenDropdownId(openDropdownId === u.id ? null : u.id)}\n                    >\n                      <FiMoreVertical />\n                    </button>\n                    {openDropdownId === u.id && (\n                      <div style={styles.dropdownMenu}>\n                        <div\n                          style={styles.dropdownItem}\n                          onClick={() => {\n                            setOpenDropdownId(null);\n                            handleEdit(u);\n                          }}\n                        >\n                          <FiEdit style={{ marginRight: 8 }} /> Edit\n                        </div>\n                        <div\n                          style={styles.dropdownItem}\n                          onClick={() => {\n                            setOpenDropdownId(null);\n                            toggleActive(u.id, u.is_active);\n                          }}\n                        >\n                          {u.is_active ? <FiXCircle style={{ marginRight: 8, color: '#ef4444' }} /> : <FiCheckCircle style={{ marginRight: 8, color: '#16a34a' }} />}\n                          {u.is_active ? 'Deactivate' : 'Activate'}\n                        </div>\n                        <div\n                          style={{ ...styles.dropdownItem, color: '#ef4444' }}\n                          onClick={() => {\n                            setOpenDropdownId(null);\n                            hardDelete(u.id);\n                          }}\n                        >\n                          <FiTrash2 style={{ marginRight: 8 }} /> Delete\n                        </div>\n                      </div>\n                    )}\n                    {/* Overlay to close dropdown when clicking outside */}\n                    {openDropdownId === u.id && (\n                      <div\n                        style={{ position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh', zIndex: 998 }}\n                        onClick={() => setOpenDropdownId(null)}\n                      />\n                    )}\n                  </div>\n                </td>\n              </tr>\n            ))}\n            {filteredUsers.length === 0 && (\n              <tr>\n                <td colSpan=\"5\" style={styles.empty}>No users found.</td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n\n    </div>\n  );\n}\n\nconst styles = {\n  container: {\n    padding: '32px',\n    maxWidth: '1200px',\n    margin: '0 auto',\n    width: '100%',\n    fontFamily: \"'Inter', sans-serif\"\n  },\n  header: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: '32px',\n    position: 'sticky',\n    top: '50px', // Adjusted to sit below the fixed global header\n    zIndex: 9, // Lower than global header (10)\n    background: '#f8fafc',\n    paddingTop: '20px',\n    paddingBottom: '20px',\n    marginTop: '-20px'\n  },\n  title: {\n    fontSize: '28px',\n    fontWeight: '700',\n    color: '#1e293b',\n    marginBottom: '4px'\n  },\n  subtitle: {\n    fontSize: '14px',\n    color: '#64748b'\n  },\n  addButton: {\n    background: '#2563eb',\n    color: '#fff',\n    border: 'none',\n    padding: '12px 20px',\n    borderRadius: '8px',\n    fontWeight: '600',\n    display: 'flex',\n    alignItems: 'center',\n    cursor: 'pointer',\n    boxShadow: '0 4px 6px rgba(37,99,235,0.2)',\n    transition: 'all 0.2s'\n  },\n  formCard: {\n    background: '#fff',\n    borderRadius: '12px',\n    padding: '24px',\n    marginBottom: '32px',\n    boxShadow: '0 4px 12px rgba(0,0,0,0.05)',\n    border: '1px solid #e2e8f0'\n  },\n  formTitle: {\n    fontSize: '16px',\n    fontWeight: '600',\n    marginBottom: '16px',\n    color: '#334155'\n  },\n  formGrid: {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\n    gap: '16px',\n    marginBottom: '24px'\n  },\n  inputGroup: {\n    display: 'flex',\n    flexDirection: 'column',\n    gap: '6px'\n  },\n  label: {\n    fontSize: '13px',\n    fontWeight: '500',\n    color: '#64748b'\n  },\n  input: {\n    padding: '10px 12px',\n    borderRadius: '6px',\n    border: '1px solid #cbd5e1',\n    fontSize: '14px',\n    outline: 'none'\n  },\n  select: {\n    padding: '10px 12px',\n    borderRadius: '6px',\n    border: '1px solid #cbd5e1',\n    fontSize: '14px',\n    outline: 'none',\n    background: '#fff'\n  },\n  formActions: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    gap: '12px'\n  },\n  cancelButton: {\n    background: 'transparent',\n    border: '1px solid #cbd5e1',\n    padding: '8px 16px',\n    borderRadius: '6px',\n    cursor: 'pointer',\n    color: '#64748b'\n  },\n  submitButton: {\n    background: '#2563eb',\n    color: '#fff',\n    border: 'none',\n    padding: '8px 16px',\n    borderRadius: '6px',\n    cursor: 'pointer',\n    fontWeight: '500'\n  },\n  toolbar: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: '16px'\n  },\n  searchBox: {\n    display: 'flex',\n    alignItems: 'center',\n    background: '#fff',\n    padding: '8px 16px',\n    borderRadius: '8px',\n    border: '1px solid #e2e8f0',\n    width: '300px'\n  },\n  searchInput: {\n    border: 'none',\n    outline: 'none',\n    width: '100%',\n    fontSize: '14px',\n    color: '#334155'\n  },\n  stats: {\n    fontSize: '13px',\n    color: '#64748b'\n  },\n  tableCard: {\n    background: '#fff',\n    borderRadius: '12px',\n    boxShadow: '0 4px 6px rgba(0,0,0,0.02)',\n    border: '1px solid #e2e8f0',\n    overflow: 'hidden'\n  },\n  table: {\n    width: '100%',\n    borderCollapse: 'collapse',\n    fontSize: '14px'\n  },\n  th: {\n    textAlign: 'left',\n    padding: '16px',\n    background: '#f8fafc',\n    color: '#64748b',\n    fontWeight: '600',\n    borderBottom: '1px solid #e2e8f0'\n  },\n  td: {\n    padding: '16px',\n    borderBottom: '1px solid #e2e8f0',\n    color: '#334155'\n  },\n  trAlt: {\n    background: '#fcfcfc'\n  },\n  empty: {\n    padding: '32px',\n    textAlign: 'center',\n    color: '#94a3b8'\n  },\n  avatar: {\n    width: '32px',\n    height: '32px',\n    borderRadius: '50%',\n    background: '#e0e7ff',\n    color: '#4338ca',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginRight: '12px'\n  },\n  userName: {\n    fontWeight: '600',\n    color: '#1e293b'\n  },\n  userEmail: {\n    fontSize: '12px',\n    color: '#64748b'\n  },\n  code: {\n    background: '#f1f5f9',\n    padding: '2px 6px',\n    borderRadius: '4px',\n    fontFamily: 'monospace',\n    fontSize: '12px',\n    color: '#475569'\n  },\n  orgName: {\n    fontWeight: '600',\n    fontSize: '13px',\n    color: '#1e293b',\n    marginBottom: '4px'\n  },\n  studentBadge: {\n    background: '#f0f9ff',\n    color: '#0369a1',\n    padding: '2px 8px',\n    borderRadius: '12px',\n    fontSize: '12px',\n    fontWeight: '500'\n  },\n  adminBadge: {\n    background: '#fdf4ff',\n    color: '#86198f',\n    padding: '2px 8px',\n    borderRadius: '12px',\n    fontSize: '12px',\n    fontWeight: '500'\n  },\n  statusActive: {\n    display: 'inline-flex',\n    alignItems: 'center',\n    color: '#16a34a',\n    fontWeight: '500',\n    fontSize: '13px'\n  },\n  statusInactive: {\n    display: 'inline-flex',\n    alignItems: 'center',\n    color: '#ef4444',\n    fontWeight: '500',\n    fontSize: '13px'\n  },\n  activateBtn: {\n    background: '#f0fdf4',\n    border: '1px solid #bbf7d0',\n    color: '#16a34a',\n    padding: '6px 10px',\n    borderRadius: '6px',\n    cursor: 'pointer',\n    fontSize: '12px',\n    display: 'flex',\n    alignItems: 'center'\n  },\n  deactivateBtn: {\n    background: '#fef2f2',\n    border: '1px solid #fecaca',\n    color: '#ef4444',\n    padding: '6px 10px',\n    borderRadius: '6px',\n    cursor: 'pointer',\n    fontSize: '12px',\n    display: 'flex',\n    alignItems: 'center'\n  },\n  deleteBtn: {\n    background: '#fee2e2',\n    border: '1px solid #fecaca',\n    color: '#991b1b',\n    padding: '6px 10px',\n    borderRadius: '6px',\n    cursor: 'pointer',\n    fontSize: '12px',\n  },\n  editBtn: {\n    padding: '6px',\n    borderRadius: '6px',\n    border: '1px solid #cbd5e1',\n    background: 'white',\n    cursor: 'pointer',\n    display: 'inline-flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: '#64748b'\n  },\n  cardHeader: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: '16px'\n  },\n  actionBtn: {\n    background: 'transparent',\n    border: 'none',\n    cursor: 'pointer',\n    padding: '8px',\n    borderRadius: '50%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: '#64748b',\n    transition: 'background 0.2s',\n    ':hover': {\n      background: '#f1f5f9'\n    }\n  },\n  dropdownMenu: {\n    position: 'absolute',\n    right: 0,\n    top: '100%',\n    marginTop: '4px',\n    background: '#fff',\n    border: '1px solid #e2e8f0',\n    borderRadius: '8px',\n    boxShadow: '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',\n    zIndex: 999,\n    minWidth: '160px',\n    overflow: 'hidden'\n  },\n  dropdownItem: {\n    padding: '10px 16px',\n    fontSize: '14px',\n    color: '#334155',\n    cursor: 'pointer',\n    display: 'flex',\n    alignItems: 'center',\n    transition: 'background 0.1s',\n    ':hover': {\n      background: '#f8fafc'\n    }\n  },\n  closeBtn: {\n    background: 'transparent',\n    border: 'none',\n    cursor: 'pointer',\n    fontSize: '18px',\n    color: '#94a3b8'\n  }\n};\nconst commonStyles = {\n  header: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: '32px',\n    background: '#fff',\n    padding: '24px 32px',\n    borderRadius: '16px',\n    boxShadow: '0 4px 20px rgba(0,0,0,0.05)',\n    border: '1px solid #e2e8f0'\n  },\n  title: {\n    fontSize: '24px',\n    fontWeight: '700',\n    color: '#0f172a',\n    display: 'flex',\n    alignItems: 'center',\n    margin: 0\n  },\n  subtitle: {\n    fontSize: '14px',\n    color: '#64748b',\n    marginTop: '4px',\n    margin: 0\n  },\n  primaryButton: {\n    background: '#2563eb',\n    color: '#fff',\n    border: 'none',\n    padding: '12px 24px',\n    borderRadius: '10px',\n    fontWeight: '600',\n    cursor: 'pointer',\n    display: 'flex',\n    alignItems: 'center',\n    boxShadow: '0 4px 12px rgba(37,99,235,0.2)',\n    transition: 'all 0.2s',\n    fontSize: '14px'\n  }\n};\n\n\n"],"names":["AdminUsers","users","setUsers","useState","filteredUsers","setFilteredUsers","search","setSearch","showAddForm","setShowAddForm","newUser","setNewUser","editingUser","setEditingUser","openDropdownId","setOpenDropdownId","useEffect","fetchUsers","lower","u","r","api","err","handleSubmit","response","prev","payload","resetForm","handleEdit","user","toggleActive","userId","currentStatus","hardDelete","_b","_a","jsxs","styles","commonStyles","jsx","FiUsers","FiPlus","FiX","e","FiSearch","i","FiUser","FiMoreVertical","FiEdit","FiXCircle","FiCheckCircle","FiTrash2"],"mappings":"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"}