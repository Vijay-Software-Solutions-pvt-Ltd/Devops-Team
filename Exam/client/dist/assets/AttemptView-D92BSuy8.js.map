{"version":3,"file":"AttemptView-D92BSuy8.js","sources":["../../src/pages/student/AttemptView.jsx"],"sourcesContent":["// client/src/pages/AttemptView.jsx\nimport React, { useEffect, useState } from 'react';\nimport api from '../../services/api';\nimport { useParams } from 'react-router-dom';\nimport StudentHeader from \"../../components/StudentHeader\";\nimport { FiUser, FiCode, FiActivity, FiCamera, FiBarChart2 } from \"react-icons/fi\";\n\nexport default function AttemptView() {\n  const { id } = useParams();\n  const [data, setData] = useState(null);\n\n  useEffect(() => {\n    api.get(`/admin/attempts/${id}`).then(r => setData(r.data)).catch(e => console.error(e));\n  }, [id]);\n\n  if (!data) return <div style={styles.loading}>Loading attempt data...</div>;\n\n  const { attempt, answers, logs, snapshots } = data;\n\n  return (\n    <>\n      <StudentHeader />\n      <div style={styles.container}>\n        <div style={styles.header}>\n          <h1 style={styles.title}>Attempt Analysis</h1>\n          <p style={styles.subtitle}>Detailed review of exam session {id}</p>\n        </div>\n\n        {/* Summary Card */}\n        <div style={styles.card}>\n          <div style={styles.cardHeader}>\n            <span style={styles.iconBox}><FiBarChart2 /></span>\n            <h3 style={styles.cardTitle}>Performance Summary</h3>\n          </div>\n          <div style={styles.statGrid}>\n            <div style={styles.statItem}>\n              <span style={styles.statLabel}>Total Score</span>\n              <span style={styles.statValue}>{attempt.total_score || 0}</span>\n            </div>\n            <div style={styles.statItem}>\n              <span style={styles.statLabel}>User ID</span>\n              <span style={styles.statValueSm}>{attempt.user_id}</span>\n            </div>\n            <div style={styles.statItem}>\n              <span style={styles.statLabel}>Status</span>\n              <span style={{ ...styles.badge, background: attempt.status === 'submitted' ? '#dcfce7' : '#fee2e2', color: attempt.status === 'submitted' ? '#166534' : '#991b1b' }}>\n                {attempt.status || 'Unknown'}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <div style={styles.row}>\n\n          {/* Logs Timeline */}\n          <div style={{ ...styles.card, flex: 1 }}>\n            <div style={styles.cardHeader}>\n              <span style={{ ...styles.iconBox, background: '#fef3c7', color: '#d97706' }}><FiActivity /></span>\n              <h3 style={styles.cardTitle}>Activity Log</h3>\n            </div>\n            <div style={styles.logList}>\n              {logs.length === 0 ? <p style={styles.empty}>No logs recorded.</p> :\n                logs.map(l => (\n                  <div key={l.id} style={styles.logItem}>\n                    <div style={styles.logTime}>{new Date(l.event_ts).toLocaleTimeString()}</div>\n                    <div style={styles.logContent}>\n                      <div style={styles.logType}>{l.event_type}</div>\n                      <div style={styles.logMeta}>{JSON.stringify(l.meta)}</div>\n                    </div>\n                  </div>\n                ))\n              }\n            </div>\n          </div>\n\n          {/* Snapshots */}\n          <div style={{ ...styles.card, flex: 1 }}>\n            <div style={styles.cardHeader}>\n              <span style={{ ...styles.iconBox, background: '#e0e7ff', color: '#4338ca' }}><FiCamera /></span>\n              <h3 style={styles.cardTitle}>Snapshots ({snapshots.length})</h3>\n            </div>\n            <div style={styles.snapGrid}>\n              {snapshots.map(s => (\n                <div key={s.id} style={styles.snapItem}>\n                  <div style={styles.snapPlaceholder}>\n                    <FiUser size={24} color=\"#cbd5e1\" />\n                  </div>\n                  <div style={styles.snapMeta}>\n                    {new Date(s.captured_at).toLocaleTimeString()}\n                  </div>\n                </div>\n              ))}\n              {snapshots.length === 0 && <p style={styles.empty}>No snapshots captured.</p>}\n            </div>\n          </div>\n\n        </div>\n\n        {/* Answers Dump */}\n        <div style={styles.card}>\n          <div style={styles.cardHeader}>\n            <span style={{ ...styles.iconBox, background: '#f3f4f6', color: '#1f2937' }}><FiCode /></span>\n            <h3 style={styles.cardTitle}>Submitted Answers</h3>\n          </div>\n          <div style={styles.codeBlock}>\n            {JSON.stringify(answers, null, 2)}\n          </div>\n        </div>\n\n      </div>\n    </>\n  );\n}\n\nconst styles = {\n  container: {\n    padding: '32px',\n    maxWidth: '1200px',\n    margin: '0 auto',\n    fontFamily: \"'Inter', sans-serif\",\n    background: '#f8fafc',\n    minHeight: '100vh'\n  },\n  loading: {\n    padding: '40px',\n    textAlign: 'center',\n    fontSize: '18px',\n    color: '#64748b'\n  },\n  header: {\n    marginBottom: '32px'\n  },\n  title: {\n    fontSize: '28px',\n    fontWeight: '800',\n    color: '#0f172a',\n    marginBottom: '8px'\n  },\n  subtitle: {\n    fontSize: '16px',\n    color: '#64748b'\n  },\n  card: {\n    background: '#fff',\n    borderRadius: '16px',\n    boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\n    padding: '24px',\n    marginBottom: '24px',\n    border: '1px solid #e2e8f0'\n  },\n  cardHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    marginBottom: '20px',\n    gap: '12px'\n  },\n  iconBox: {\n    width: '32px',\n    height: '32px',\n    borderRadius: '8px',\n    background: '#dbeafe',\n    color: '#1e40af',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  cardTitle: {\n    fontSize: '18px',\n    fontWeight: '600',\n    color: '#1e293b',\n    margin: 0\n  },\n  statGrid: {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\n    gap: '24px'\n  },\n  statItem: {\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  statLabel: {\n    fontSize: '13px',\n    fontWeight: '600',\n    color: '#64748b',\n    marginBottom: '4px',\n    textTransform: 'uppercase',\n    letterSpacing: '0.05em'\n  },\n  statValue: {\n    fontSize: '24px',\n    fontWeight: '700',\n    color: '#0f172a'\n  },\n  statValueSm: {\n    fontSize: '16px',\n    fontWeight: '500',\n    color: '#334155',\n    fontFamily: 'monospace'\n  },\n  badge: {\n    alignSelf: 'flex-start',\n    padding: '4px 8px',\n    borderRadius: '4px',\n    fontSize: '12px',\n    fontWeight: '600'\n  },\n  row: {\n    display: 'flex',\n    gap: '24px',\n    flexWrap: 'wrap'\n  },\n  logList: {\n    maxHeight: '400px',\n    overflowY: 'auto'\n  },\n  logItem: {\n    display: 'flex',\n    gap: '12px',\n    marginBottom: '12px',\n    fontSize: '14px',\n    borderLeft: '2px solid #e2e8f0',\n    paddingLeft: '12px',\n    paddingBottom: '12px'\n  },\n  logTime: {\n    minWidth: '70px',\n    fontSize: '12px',\n    color: '#94a3b8',\n    fontWeight: '500'\n  },\n  logContent: {\n    flex: 1\n  },\n  logType: {\n    fontWeight: '600',\n    color: '#334155',\n    marginBottom: '2px'\n  },\n  logMeta: {\n    fontSize: '12px',\n    color: '#64748b',\n    background: '#f1f5f9',\n    padding: '4px',\n    borderRadius: '4px',\n    wordBreak: 'break-all'\n  },\n  snapGrid: {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(auto-fill, minmax(100px, 1fr))',\n    gap: '12px'\n  },\n  snapItem: {\n    background: '#f8fafc',\n    borderRadius: '8px',\n    padding: '8px',\n    border: '1px solid #e2e8f0'\n  },\n  snapPlaceholder: {\n    width: '100%',\n    height: '60px',\n    background: '#e2e8f0',\n    borderRadius: '4px',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginBottom: '8px'\n  },\n  snapMeta: {\n    fontSize: '11px',\n    color: '#64748b',\n    textAlign: 'center'\n  },\n  codeBlock: {\n    background: '#1e293b',\n    color: '#f1f5f9',\n    padding: '16px',\n    borderRadius: '8px',\n    fontFamily: 'monospace',\n    fontSize: '13px',\n    overflowX: 'auto',\n    whiteSpace: 'pre-wrap'\n  },\n  empty: {\n    color: '#cbd5e1',\n    fontStyle: 'italic',\n    fontSize: '14px'\n  }\n};\n"],"names":["AttemptView","id","useParams","data","setData","useState","useEffect","api","r","e","jsx","styles","attempt","answers","logs","snapshots","jsxs","Fragment","StudentHeader","FiBarChart2","FiActivity","l","FiCamera","FiUser","FiCode"],"mappings":"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"}