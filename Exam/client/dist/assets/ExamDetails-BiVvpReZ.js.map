{"version":3,"file":"ExamDetails-BiVvpReZ.js","sources":["../../src/pages/student/ExamDetails.jsx"],"sourcesContent":["// client/src/pages/ExamDetails.jsx\nimport React, { useEffect, useState } from 'react';\nimport api from '../../services/api';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport StudentHeader from \"../../components/StudentHeader\";\n\nexport default function ExamDetails() {\n  const { id } = useParams();\n  const [exam, setExam] = useState(null);\n  const [agree, setAgree] = useState(false);\n  const nav = useNavigate();\n  const user = JSON.parse(localStorage.getItem('user') || '{}');\n\n  useEffect(() => {\n    async function loadExam() {\n      try {\n        const res = await api.get(`/user/exams/${id}`);\n        // ✅ safe data access\n        const examData = res.data.exam || res.data.exams?.[0];\n        setExam(examData);\n      } catch (err) {\n        console.error(\"Exam fetch failed:\", err);\n        // ✅ logout ONLY on auth errors\n        if (err.response?.status === 401) {\n          nav('/#/login');\n        }\n      }\n    }\n\n    loadExam();\n  }, [id, nav]);\n\n  function formatDate(dt) {\n    if (!dt) return '-';\n    return new Date(dt).toLocaleString();\n  }\n\n  function handleStart() {\n    if (!agree) {\n      alert('Please accept Terms & Conditions');\n      return;\n    }\n    nav(`/exams/${id}`);\n  }\n\n  if (!exam) {\n    return <div>Loading exam...</div>;\n  }\n\n  return (\n    <>\n      <StudentHeader />\n\n      <div style={pageWrapper}>\n        <div style={layout}>\n\n          {/* LEFT SIDE */}\n          <section style={examCard}>\n            <h2 style={examTitle}>{exam.title}</h2>\n            <p style={examDesc}>{exam.description}</p>\n\n            <div style={infoGrid}>\n              <div style={infoBox}>\n                <div style={infoLabel}>Duration</div>\n                <div style={infoValue}>{exam.duration_minutes} minutes</div>\n              </div>\n              <div style={infoBox}>\n                <div style={infoLabel}>Start</div>\n                <div style={infoValue}>{formatDate(exam.start_date)}</div>\n              </div>\n              <div style={infoBox}>\n                <div style={infoLabel}>End</div>\n                <div style={infoValue}>{formatDate(exam.end_date)}</div>\n              </div>\n            </div>\n\n            <h3 style={subheading}>Instructions</h3>\n            <ol style={instList}>\n              <li>\n                <strong style={{ color: \"#c62828\" }}>\n                  Any attempt to minimize, resize, or leave the exam screen will lead to disqualification.\n                </strong>\n              </li>\n              <li>Questions will be shown only after you click <strong>Start Exam</strong>.</li>\n              <li>Do not switch tabs or windows during the exam; monitoring is active.</li>\n              <li>Webcam snapshots will be taken regularly for proctoring.</li>\n              <li>Once submitted or time expires, the exam cannot be retaken.</li>\n            </ol>\n\n            <label style={checkboxRow}>\n              <input\n                type=\"checkbox\"\n                checked={agree}\n                onChange={(e) => setAgree(e.target.checked)}\n                style={{ marginRight: 8 }}\n              />\n              I agree to the Terms & Conditions\n            </label>\n\n            <button\n              onClick={handleStart}\n              disabled={!agree}\n              style={{\n                ...startBtn,\n                opacity: agree ? 1 : 0.5,\n                cursor: agree ? 'pointer' : 'not-allowed'\n              }}\n            >\n              Start Exam\n            </button>\n          </section>\n\n          {/* RIGHT SIDE */}\n          <aside style={sideColumn}>\n            <div style={sideCard}>\n              <h4 style={sideTitle}>Candidate</h4>\n              <div style={{ fontWeight: 600 }}>{user.name}</div>\n              <div style={sideText}>ID: {user.id}</div>\n              <div style={sideText}>Email: {user.email}</div>\n            </div>\n\n            <div style={sideCard}>\n              <h4 style={sideTitle}>Exam Type</h4>\n              <p style={sideText}>\n                Mix of MCQ and Coding questions.\n              </p>\n            </div>\n\n            <div style={sideCard}>\n              <h4 style={sideTitle}>Proctoring</h4>\n              <p style={sideText}>\n                Webcam + Activity Logs enabled.\n              </p>\n            </div>\n          </aside>\n\n        </div>\n      </div>\n    </>\n  );\n}\n\n/* STYLES */\n\nconst pageWrapper = {\n  minHeight: '100vh',\n  background: '#f1f5f9',\n  padding: '30px 40px',\n  fontFamily: 'Segoe UI, system-ui, sans-serif',\n};\n\nconst layout = {\n  display: 'grid',\n  gridTemplateColumns: '2fr 1fr',\n  gap: 24\n};\n\nconst examCard = {\n  background: '#fff',\n  borderRadius: 18,\n  padding: 24,\n  boxShadow: '0 16px 40px rgba(15,23,42,0.08)',\n};\n\nconst examTitle = {\n  fontSize: 22,\n  fontWeight: 700\n};\n\nconst examDesc = {\n  fontSize: 14,\n  color: '#64748b'\n};\n\nconst infoGrid = {\n  display: 'grid',\n  gridTemplateColumns: 'repeat(auto-fit, minmax(160px,1fr))',\n  gap: 12,\n  marginTop: 16\n};\n\nconst infoBox = {\n  background: '#f1f5f9',\n  borderRadius: 10,\n  padding: 12\n};\n\nconst infoLabel = {\n  fontSize: 11,\n  color: '#6b7280'\n};\n\nconst infoValue = {\n  fontSize: 14,\n  fontWeight: 600\n};\n\nconst subheading = {\n  marginTop: 20,\n  fontSize: 16,\n  fontWeight: 600\n};\n\nconst instList = {\n  paddingLeft: 20,\n  fontSize: 14,\n  color: '#475569'\n};\n\nconst checkboxRow = {\n  marginTop: 16,\n  fontSize: 13,\n  display: 'flex',\n  alignItems: 'center'\n};\n\nconst startBtn = {\n  marginTop: 16,\n  padding: '10px 18px',\n  borderRadius: 999,\n  background: '#2563eb',\n  color: '#fff',\n  border: 'none',\n  fontWeight: 600\n};\n\nconst sideColumn = {\n  display: 'flex',\n  flexDirection: 'column',\n  gap: 14\n};\n\nconst sideCard = {\n  background: '#fff',\n  borderRadius: 16,\n  padding: 16,\n  boxShadow: '0 10px 30px rgba(15,23,42,0.06)'\n};\n\nconst sideTitle = {\n  fontSize: 15,\n  fontWeight: 600\n};\n\nconst sideText = {\n  fontSize: 13,\n  color: '#64748b'\n};\n"],"names":["ExamDetails","id","useParams","exam","setExam","useState","agree","setAgree","nav","useNavigate","user","useEffect","loadExam","res","api","examData","_a","err","_b","formatDate","dt","handleStart","jsxs","Fragment","jsx","StudentHeader","pageWrapper","layout","examCard","examTitle","examDesc","infoGrid","infoBox","infoLabel","infoValue","subheading","instList","checkboxRow","e","startBtn","sideColumn","sideCard","sideTitle","sideText"],"mappings":"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"}